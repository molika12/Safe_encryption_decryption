<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to Encrypt & Send Files - SecureShare</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
    /* --- FONT & RESET --- */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

    /* --- DARK THEME VARIABLES --- */
    :root {
        --bg-gradient-start: #0f172a; --bg-gradient-end: #1e293b;
        --sidebar-bg: rgba(15, 23, 42, 0.9); --header-bg: rgba(30, 41, 59, 0.7);
        --card-bg: rgba(30, 41, 59, 0.7); --input-bg: rgba(15, 23, 42, 0.5);
        --text-primary: #f8fafc; --text-secondary: #e2e8f0; --text-muted: #94a3b8;
        --border-color: rgba(255, 255, 255, 0.1); --border-input: #334155; --border-focus: #3b82f6;
        --accent-gradient-start: #3b82f6; --accent-gradient-end: #8b5cf6; --accent-text: #3b82f6;
        --accent-hover-bg: rgba(59, 130, 246, 0.2); --accent-focus-shadow: rgba(59, 130, 246, 0.1);
        --accent-approve-gradient-start: #10b981; --accent-approve-gradient-end: #059669;
        --accent-reject-gradient-start: #ef4444; --accent-reject-gradient-end: #dc2626;
        --accent-reject-text: #ef4444; --accent-reject-shadow: rgba(239, 68, 68, 0.3);
        --success-bg: rgba(16, 185, 129, 0.1); --success-border: rgba(16, 185, 129, 0.3); --success-text: #10b981;
        --error-bg: rgba(239, 68, 68, 0.1); --error-border: rgba(239, 68, 68, 0.3); --error-text: #ef4444;
        --info-bg: rgba(59, 130, 246, 0.1); --info-border: rgba(59, 130, 246, 0.3); --info-text: #3b82f6;
    }

    /* --- GLOBAL STYLES --- */
    body { display: flex; min-height: 100vh; background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%); color: var(--text-primary); overflow-x: hidden; }
    .sidebar { width: 280px; background: var(--sidebar-bg); backdrop-filter: blur(10px); color: var(--text-secondary); display: flex; flex-direction: column; padding: 30px 20px; border-right: 1px solid var(--border-color); box-shadow: 5px 0 15px rgba(0, 0, 0, 0.2); z-index: 100; flex-shrink: 0; }
    .logo-container { display: flex; align-items: center; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); }
    .logo-icon { background: linear-gradient(135deg, var(--accent-gradient-start) 0%, var(--accent-gradient-end) 100%); width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 12px; box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3); }
    .logo-icon i { color: white; font-size: 20px; }
    .logo-text { font-size: 1.5rem; font-weight: 700; background: linear-gradient(135deg, var(--accent-gradient-start) 0%, var(--accent-gradient-end) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .sidebar a { text-decoration: none; color: var(--text-secondary); margin-bottom: 15px; font-weight: 500; padding: 12px 15px; border-radius: 10px; display: flex; align-items: center; transition: all 0.3s ease; }
    .sidebar a i { margin-right: 12px; width: 20px; text-align: center; font-size: 1.1rem; }
    .sidebar a:hover, .sidebar a.active { background: var(--accent-hover-bg); color: var(--accent-text); transform: translateX(5px); }
    .sidebar a.logout { margin-top: auto; color: var(--accent-reject-text); border: 1px solid var(--accent-reject-shadow); }
    .sidebar a.logout:hover { background: var(--error-bg); transform: translateX(5px); }
    .main { flex: 1; display: flex; flex-direction: column; overflow-y: auto; }
    header { height: 80px; display: flex; justify-content: space-between; align-items: center; padding: 0 40px; background: var(--header-bg); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-color); box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1); flex-shrink: 0; }
    header h1 { font-size: 1.8rem; font-weight: 600; color: var(--text-secondary); }
    .user-info { display: flex; align-items: center; gap: 15px; }
    .user-avatar { width: 45px; height: 45px; border-radius: 50%; background: linear-gradient(135deg, var(--accent-gradient-start) 0%, var(--accent-gradient-end) 100%); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1.2rem; box-shadow: 0 4px 10px var(--accent-focus-shadow); color: white; } /* Sender Avatar */
    .user-details { text-align: right; }
    .user-details .sender-id { font-weight: 600; color: var(--text-muted); }
    .user-details .sender-id span { color: var(--accent-text); }
    .user-details .email { font-size: 0.9rem; color: var(--text-muted); }
    .dashboard-content { padding: 30px 40px; flex-grow: 1; display: flex; justify-content: center; align-items: flex-start; }
    .card { background: var(--card-bg); backdrop-filter: blur(10px); border-radius: 16px; padding: 30px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); border: 1px solid var(--border-color); animation: fadeInUp 0.6s ease-out; width: 100%; max-width: 800px; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .card-header { display: flex; align-items: center; margin-bottom: 25px; color: var(--text-secondary); font-size: 1.5rem; font-weight: 600; }
    .card-header i { margin-right: 12px; font-size: 1.6rem; color: var(--accent-text); }
    /* Styles for instructions */
    .instructions-section { margin-bottom: 30px; }
    .instructions-section h3 { color: var(--accent-text); margin-bottom: 15px; font-size: 1.2rem; border-bottom: 1px solid var(--border-input); padding-bottom: 8px;}
    .instructions-list { list-style: none; padding-left: 0; }
    .instructions-list li { margin-bottom: 20px; padding-left: 40px; position: relative; line-height: 1.6; color: var(--text-secondary); }
    .instructions-list li::before { content: attr(data-step); position: absolute; left: 0; top: 0; width: 28px; height: 28px; background: var(--accent-text); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.9rem; }
    .instructions-list strong { color: var(--text-primary); font-weight: 600; }
    .instructions-list code { background-color: var(--input-bg); color: var(--accent-text); padding: 2px 6px; border-radius: 4px; font-family: monospace; font-size: 0.9em; }
    .instructions-list a { color: var(--accent-text); text-decoration: none; font-weight: 500; }
    .instructions-list a:hover { text-decoration: underline; }
    .note { margin-top: 30px; padding: 15px; background: var(--info-bg); border-left: 4px solid var(--info-text); color: var(--info-text); border-radius: 8px; font-size: 0.9rem; }
    .note i { margin-right: 8px; }

    /* Responsive */
    @media (max-width: 768px) { /* ... (Keep responsive styles) ... */ }
    @media (max-width: 480px) { /* ... (Keep responsive styles) ... */ }
</style>
</head>
<body>

<div class="sidebar">
    <div class="logo-container">
        <div class="logo-icon"><i class="fas fa-shield-alt"></i></div>
        <div class="logo-text">SecureShare</div>
    </div>
    <a href="sender_dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
    <a href="encrypt.html"><i class="fas fa-paper-plane"></i> Encryption</a>
    <a href="uploadfiles.html"><i class="fas fa-tasks"></i> Uploads & Accept</a>
    <a href="add_users.html"><i class="fas fa-user-plus"></i> Add Users</a>
    <a href="pending_requests.html"><i class="fas fa-clock"></i> Pending Requests</a>
    <a href="encrypt_instructions.html" class="active"><i class="fas fa-question-circle"></i> How to Encrypt/Send</a>
    <a href="#" class="logout" onclick="logout()">
        <i class="fas fa-sign-out-alt"></i> Logout
    </a>
</div>

<div class="main">
    <header>
        <h1>How to Encrypt & Send Files</h1>
        <div class="user-info">
            <div class="user-avatar" id="userAvatar">S</div> <div class="user-details">
                <div class="sender-id">ID: <span id="senderId">Loading...</span></div>
                <div class="email" id="emailDisplay">Loading...</div>
            </div>
        </div>
    </header>

    <div class="dashboard-content">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-lock"></i>
                <h2>Encryption & Sending Guide</h2>
            </div>

            <div class="instructions-section">
                <h3><i class="fas fa-user-plus"></i> Adding a Receiver (If Needed)</h3>
                <ol class="instructions-list">
                    <li data-step="1">
                        <strong>Navigate:</strong> Go to the <a href="add_users.html">Add Users</a> section using the sidebar.
                    </li>
                    <li data-step="2">
                        <strong>Enter Details:</strong> Type in the receiver's <strong>email address</strong> and create a temporary <strong>password</strong> for them.
                    </li>
                    <li data-step="3">
                        <strong>Add User:</strong> Click the "Add User" button.
                    </li>
                    <li data-step="4">
                        <strong>Inform Receiver:</strong> The receiver will receive an email containing your unique <strong>Sender ID</strong>. They will need this ID, their email, and the temporary password to log in for the first time. (Note: Current system uses email + Sender ID only for receiver login, password is set but not checked on login).
                    </li>
                </ol>
            </div>

            <div class="instructions-section">
                <h3><i class="fas fa-paper-plane"></i> Encryption Process</h3>
                <ol class="instructions-list">
                    <li data-step="1">
                        <strong>Navigate:</strong> Go to the <a href="encrypt.html">Encryption</a> section.
                    </li>
                    <li data-step="2">
                        <strong>Select Receiver:</strong> Choose the intended receiver from the dropdown list. Make sure you have added them first (see previous section).
                    </li>
                    <li data-step="3">
                        <strong>Choose File:</strong> Click "Choose Image File" and select the **original image** you want to encrypt and send.
                    </li>
                     <li data-step="4">
                        <strong>Encrypt:</strong> Click the "Encrypt File" button. The system will encrypt the image using a unique method for that receiver.
                    </li>
                     <li data-step="5">
                        <strong>Encrypted File Download:</strong> The **encrypted file** (e.g., <code>enc_...png</code>) will be automatically downloaded to your computer.
                    </li>
                     <li data-step="6">
                        <strong>Send Manually:</strong> You need to send this downloaded encrypted <code>.png</code> file to your receiver through other means (like email, chat, USB drive, etc.). They will then use the <a href="decrypt.html">Decrypt File</a> section on their side.
                    </li>
                </ol>
                 <div class="note">
                    <i class="fas fa-info-circle"></i>
                    This method requires you to manually transfer the encrypted file. The necessary decryption keys are automatically saved for the receiver in the database.
                </div>
            </div>


            <div class="instructions-section">
                <h3><i class="fas fa-inbox-check"></i> Fulfilling a Receiver's Request</h3>
                 <ol class="instructions-list">
                     <li data-step="1">
                        <strong>Navigate:</strong> Go to the <a href="uploadfiles.html">Uploads & Requests</a> section.
                    </li>
                     <li data-step="2">
                        <strong>Select File(s):</strong> In the "1. Select Files to Upload" card, choose the **original file(s)** or folder the receiver requested. You can select individual files or an entire folder.
                    </li>
                    <li data-step="3">
                        <strong>Find Request:</strong> In the "2. Manage Pending Requests" card, click "Refresh Pending Requests" to see the latest requests. Find the request from the receiver you want to fulfill.
                    </li>
                     <li data-step="4">
                        <strong>Approve & Upload:</strong> Click the green "Approve & Upload Selected" button next to the correct request.
                    </li>
                     
                     <li data-step="5">
                        <strong>Confirmation:</strong> You will see a success message, and the pending request will disappear from the list. The receiver will now see a download button on their <a href="request.html">Request Files</a> page.
                    </li>
                 </ol>
                 <div class="note">
                    <i class="fas fa-info-circle"></i>
                    Fulfilling a request is the easiest way to send files, as the system handles the secure transfer after you approve and upload. No manual file sending is needed.
                </div>
            </div>

        </div>
    </div>
     <footer>
        &copy; 2025 SecureShare. All rights reserved.
    </footer>
</div>

<script>
    // --- User Info (Only needed for header) ---
    const senderId = localStorage.getItem('senderId');
    const userEmail = localStorage.getItem('email'); // Sender's email

    document.addEventListener('DOMContentLoaded', () => {
        if (!senderId || !userEmail) {
            document.getElementById('senderId').textContent = 'N/A';
            document.getElementById('emailDisplay').textContent = 'Not logged in';
            document.getElementById('userAvatar').textContent = '?';
        } else {
            document.getElementById('senderId').textContent = senderId;
            document.getElementById('emailDisplay').textContent = userEmail;
            document.getElementById('userAvatar').textContent = getUserInitials(userEmail);
        }
    });

    function getUserInitials(emailAddr) {
        if (!emailAddr) return '?';
        return emailAddr.split(/[\s@_.]+/).map(n => n[0]).join('').substring(0, 2).toUpperCase();
    }

    // --- Navigation ---
    function logout(){
      localStorage.clear();
      window.location.href='login.html';
    }
</script>
</body>
</html>